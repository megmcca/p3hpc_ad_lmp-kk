#!/bin/bash

#flux: --nodes=1
#flux: -u
#flux: --exclusive
#flux: -q pbig
#flux: -t 60
#flux: --job-name=elcap
#flux: --setattr=thp=always
#flux: --setattr=hugepages=512GB

export starttime=`date`

echo elcap kokkos_gpu START ${starttime}

. elcap_env.sh

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1 -n 1 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 40 -v y 40 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1 -n 2 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 40 -v y 40 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1 -n 4 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 40 -v y 40 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2 -n 2 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 40 -v y 80 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2 -n 4 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 40 -v y 80 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2 -n 8 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 40 -v y 80 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=4.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 4 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 4 -n 4 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=4.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=4.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 4 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 4 -n 8 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=4.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=4.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 4 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 4 -n 16 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 80 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=4.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=8.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 8 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 8 -n 8 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=8.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=8.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 8 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 8 -n 16 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=8.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=8.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 8 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 8 -n 32 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=8.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=16.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 16 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 16 -n 16 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=16.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=16.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 16 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 16 -n 32 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=16.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=16.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 16 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 16 -n 64 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=16.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=32.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 32 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 32 -n 32 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=32.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=32.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 32 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 32 -n 64 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=32.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=32.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 32 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 32 -n 128 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=32.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=64.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 64 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 64 -n 64 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=64.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=64.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 64 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 64 -n 128 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=64.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=64.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 64 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 64 -n 256 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=64.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=128.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 128 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 128 -n 128 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=128.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=128.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 128 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 128 -n 256 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=128.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=128.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 128 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 128 -n 512 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=128.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=256.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 256 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 256 -n 256 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=256.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=256.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 256 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 256 -n 512 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=256.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=256.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 256 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 256 -n 1024 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=256.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=512.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 512 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 512 -n 512 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=512.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=512.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 512 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 512 -n 1024 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=512.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=512.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 512 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 512 -n 2048 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=512.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1024.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1024 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1024 -n 1024 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1024.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1024.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1024 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1024 -n 2048 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1024.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1024.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1024 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1024 -n 4096 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=1024.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2048.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2048 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2048 -n 2048 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2048.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2048.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2048 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2048 -n 4096 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2048.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2048.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2048 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2048 -n 8192 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=512K.node=2048.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1 -n 1 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1 -n 2 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1 -n 4 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 80 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2 -n 2 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2 -n 4 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2 -n 8 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 80 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=4.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 4 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 4 -n 4 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=4.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=4.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 4 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 4 -n 8 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=4.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=4.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 4 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 4 -n 16 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 160 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=4.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=8.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 8 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 8 -n 8 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=8.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=8.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 8 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 8 -n 16 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=8.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=8.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 8 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 8 -n 32 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 160 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=8.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=16.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 16 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 16 -n 16 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=16.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=16.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 16 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 16 -n 32 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=16.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=16.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 16 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 16 -n 64 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 160 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=16.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=32.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 32 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 32 -n 32 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=32.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=32.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 32 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 32 -n 64 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=32.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=32.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 32 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 32 -n 128 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 320 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=32.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=64.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 64 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 64 -n 64 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=64.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=64.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 64 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 64 -n 128 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=64.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=64.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 64 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 64 -n 256 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 320 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=64.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=128.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 128 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 128 -n 128 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=128.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=128.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 128 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 128 -n 256 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=128.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=128.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 128 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 128 -n 512 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 320 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=128.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=256.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 256 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 256 -n 256 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=256.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=256.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 256 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 256 -n 512 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=256.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=256.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 256 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 256 -n 1024 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 640 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=256.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=512.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 512 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 512 -n 512 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=512.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=512.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 512 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 512 -n 1024 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=512.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=512.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 512 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 512 -n 2048 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 640 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=512.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1024.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1024 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1024 -n 1024 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 1280 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1024.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1024.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1024 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1024 -n 2048 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 1280 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1024.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1024.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 1024 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 1024 -n 4096 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 640 -v y 1280 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=1024.mpi=4.gpu=4.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2048.mpi=1.gpu=1.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2048 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2048 -n 2048 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 1280 -v y 1280 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2048.mpi=1.gpu=1.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2048.mpi=2.gpu=2.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2048 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2048 -n 4096 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 1280 -v y 1280 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2048.mpi=2.gpu=2.mode=off

echo Starting run to create log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2048.mpi=4.gpu=4.mode=off
# Clear the system wide reserved core setting, since we do a custom set with corespecbal
unset MPIBIND_RESTRICT
flux run --exclusive -N 2048 --tasks-per-node=1 -x -o cpu-affinity=off -o gpu-affinity=off -l -u --quiet --time-limit=5m -o exit-timeout=none ${USE_SPINDLE} ./defrag
if [[ $? -ne 0 ]]; then
  echo "WARNING: The defrag device memory utility failed"
fi
flux run --exclusive --verbose -N 2048 -n 8192 -x -c24 -o cpu-affinity=off -o gpu-affinity=off -o mpibind=on,corespecbal:17,smt:1,verbose:1 -l -u ${USE_SPINDLE} ./lmp_elcap_kokkos_gpu -sf kk -k on g 1 -pk kokkos neigh full neigh/qeq full newton off comm device pair/only off neigh/transpose on -v x 1280 -v y 1280 -v z 1280 -v t 1000 -in in.lj.gpu.steps -nocite -log log.lammps.date=21Feb25.model=lj.machine=elcap.pkg=kokkos_gpu.kind=weak.size=4M.node=2048.mpi=4.gpu=4.mode=off


echo elcap kokkos_gpu ELAPSED ${starttime} to `date`
